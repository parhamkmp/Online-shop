{% extends 'base.html' %}

{% block title %}
	{{ post_detail.title }}
{% endblock title %}

{% block content %}
<div class="container">
    <div class="post-card">




    {% if user.username == post_detail.author.username or user.is_superuser %}     

      <div class="bg-secondary tool-box2" style="cursor:pointer;">
          <a type="button" class="text-white text-decoration-none mx-3" id='goToComments'><i class="fa fa-comment zoom-hover"></i></a>
          <a class="text-decoration-none text-white" data-bs-toggle="modal" data-bs-target="#deletePostModal">
            <i class="fa fa-trash zoom-hover"></i> 
          </a>

          <div class="modal fade" id="deletePostModal" tabindex="-1" aria-labelledby="deletePostModalLabel" aria-hidden="true">
            <div class="modal-dialog modal-dialog-centered">
              <div class="modal-content text-center">
                <div class="modal-header bg-danger text-white">
                  <h5 class="modal-title" id="deletePostModalLabel">üóëÔ∏è Delete post confirmation</h5>
                  <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body text-dark">
                  <p>Are sure to delete this post ?</p>
                </div>
                <div class="modal-footer justify-content-center">
                  <form action="{% url 'delete_post' post_detail.slug %}" method="POST">
                    {% csrf_token %}
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">No, cancel</button>
                    <button type="submit" class="btn btn-danger" onclick="deletePost()">Yes, confirm</button>
                  </form>
                </div>
              </div>
            </div>
          </div>


        <a href="{% url 'update_post' post_detail.slug %}" class="text-white text-decoration-none mx-3"><i class="fa fa-edit zoom-hover"></i></a>
        
        <a type="button" class="text-white" data-bs-toggle="modal" data-bs-target="#shareModal">
          <i class="fa fa-share-alt zoom-hover"></i>
        </a>
        <div class="modal fade" id="shareModal" tabindex="-1" aria-labelledby="shareModalLabel" aria-hidden="true">
          <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content shadow">
              <div class="modal-header bg-primary text-white">
                <h5 class="modal-title" id="shareModalLabel"><i class="fa fa-share-alt zoom-hover"></i> Share product to your friends!</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="close"></button>
              </div>
              <div class="modal-body text-center">
                <input type="text" class="form-control" id="link" value="{{ request.build_absolute_uri }}" readonly>
                <button onclick="copyToClipboard()" class="btn btn-light mt-3 mb-3"><i class="fa fa-copy"></i> Copy</button>
                <p class="text-success" id="text-is-copyed"></p>
                <div class="d-flex justify-content-center gap-3">
                  <a href="https://wa.me/?text={{ request.build_absolute_uri }}" target="_blank" class="btn btn-success">
                    <i class="fab fa-whatsapp"></i>
                  </a>
                  <a href="https://www.facebook.com/sharer/sharer.php?u={{ request.build_absolute_uri }}" target="_blank" class="btn btn-primary">
                    <i class="fab fa-facebook-f"></i>
                  </a>
                  <a href="https://twitter.com/intent/tweet?url={{ request.build_absolute_uri }}" target="_blank" class="btn btn-info">
                    <i class="fab fa-twitter"></i>
                  </a>
                  <a href="https://t.me/share/url?url={{ request.build_absolute_uri }}" target="_blank" class="btn btn-secondary">
                    <i class="fab fa-telegram-plane"></i>
                  </a>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      {% else %}
        <div class="share-box bg-secondary">
          <a type="button" class="text-white" data-bs-toggle="modal" data-bs-target="#shareModal">
            <i class="fa fa-share-alt zoom-hover"></i>
          </a>
          <div class="modal fade" id="shareModal" tabindex="-1" aria-labelledby="shareModalLabel" aria-hidden="true">
            <div class="modal-dialog modal-dialog-centered">
              <div class="modal-content shadow">
                <div class="modal-header bg-primary text-white">
                  <h5 class="modal-title" id="shareModalLabel"><i class="fa fa-share-alt zoom-hover"></i> Share post to your friends!</h5>
                  <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="close"></button>
                </div>
                <div class="modal-body text-center">
                  <input type="text" class="form-control" id="link" value="{{ request.build_absolute_uri }}" readonly>
                  <button onclick="copyToClipboard()" class="btn btn-light mt-3 mb-3"><i class="fa fa-copy"></i> Copy</button>
                  <p class="text-success" id="text-is-copyed"></p>
                  <div class="d-flex justify-content-center gap-3">
                    <a href="https://wa.me/?text={{ request.build_absolute_uri }}" target="_blank" class="btn btn-success">
                      <i class="fab fa-whatsapp"></i>
                    </a>
                    <a href="https://www.facebook.com/sharer/sharer.php?u={{ request.build_absolute_uri }}" target="_blank" class="btn btn-primary">
                      <i class="fab fa-facebook-f"></i>
                    </a>
                    <a href="https://twitter.com/intent/tweet?url={{ request.build_absolute_uri }}" target="_blank" class="btn btn-info">
                      <i class="fab fa-twitter"></i>
                    </a>
                    <a href="https://t.me/share/url?url={{ request.build_absolute_uri }}" target="_blank" class="btn btn-secondary">
                      <i class="fab fa-telegram-plane"></i>
                    </a>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <a type="button" class="text-white text-decoration-none mx-2" id='goToComments'><i class="fa fa-comment zoom-hover"></i></a>
        </div>
      {% endif %} 








    <h1 class="mb-5" style="font-size: 60px">{{ post_detail.title }}</h1>
    <img src="{{ post_detail.image.url }}" alt="{{ post_detail.title }}" class="img-fluid post-image mb-4">
    <p class="lead mt-4" style="font-size: 30px;border-left: 2px solid lightblue;padding-left: 15px;border-radius: 2px;">{{ post_detail.body }}</p>
    <br>
    <hr>
    <br>
    <div style="border-left: 2px solid purple;padding-left: 15px;border-radius: 2px;">
        <p class="text-muted">üóì Published: {{ post_detail.date|date:"Y/m/d - H:i" }}</p>
        <p class="text-muted">üïì <strong>Last Update: {{ post_detail.last_update|date:"Y-m-d H:i" }}</strong></p>
        <p class="text-muted">‚úçÔ∏è Author: <strong> {{ post_detail.author.username }}</strong></p>
    </div>

    </div>
</div>

{% endblock content %}
